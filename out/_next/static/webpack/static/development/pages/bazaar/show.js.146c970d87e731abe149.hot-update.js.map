{"version":3,"file":"static/webpack/static/development/pages/bazaar/show.js.146c970d87e731abe149.hot-update.js","sources":["webpack:///./components/bazaar/submenu.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { Menu, Segment } from \"semantic-ui-react\";\nimport firebase from \"../../firebase\";\nimport Bid from \"./bid\";\nimport OfferFilter from \"./offerfilter\";\nimport BidFilter from \"./bidfilter\";\nimport Offer from \"./offer\";\nimport \"../../css/bazaar/submenu.css\";\nimport Supporter from \"./supporter\";\nimport Loader from \"../loader\";\nclass SubMenu extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeItem: \"offers\",\n      contents: null,\n      width: this.initialwidth\n    };\n    this.ref1 = firebase\n      .firestore()\n      .collection(`bazaars/${this.props.id}/offers`);\n    this.ref2 = firebase\n      .firestore()\n      .collection(`bazaars/${this.props.id}/bids`);\n    this.contents = null;\n  }\n\n  initialwidth = () => {\n    return window.innerWidth > 750;\n  };\n\n  componentDidMount() {\n    this.content = this.ref2.onSnapshot(this.onContentUpdate);\n    window.addEventListener(\"resize\", this.handleWindowSizeChange);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.handleWindowSizeChange);\n  }\n\n  handleWindowSizeChange = () => {\n    this.setState({ width: window.innerWidth > 750 });\n  };\n\n  onContentUpdate = querySnapShot => {\n    const contents = [];\n    querySnapShot.forEach(doc => {\n      const { name, price, description, tag } = doc.data();\n      contents.push({\n        name,\n        price,\n        description,\n        tag\n      });\n    });\n    this.setState({\n      contents\n    });\n  };\n\n  handleItemClick = (e, { name }) => {\n    this.setState({ activeItem: name });\n\n    this.state.activeItem === \"bids\"\n      ? this.ref1.onSnapshot(this.onContentUpdate)\n      : this.ref2.onSnapshot(this.onContentUpdate);\n  };\n  render() {\n    const { activeItem, width } = this.state;\n    return (\n      <div style={{ margin: \"10px\" }}>\n        {this.state.contents === null ? (\n          <Loader />\n        ) : (\n          <div\n            style={{\n              display: \"flex\",\n              \"flex-direction\": \"row\"\n            }}\n          >\n            <div style={{ width: width ? \"60%\" : \"100%\" }}>\n              <Menu attached=\"top\" tabular>\n                <Menu.Item\n                  name=\"offers\"\n                  active={activeItem === \"offers\"}\n                  onClick={this.handleItemClick}\n                >\n                  Offers\n                </Menu.Item>\n                {/* <Menu.Item\n                  name=\"bids\"\n                  active={activeItem === \"bids\"}\n                  onClick={this.handleItemClick}\n                >\n                  Bids\n                </Menu.Item> */}\n              </Menu>\n              <Segment attached=\"bottom\" id=\"segment\">\n                {this.state.activeItem === \"bids\" ? (\n                  <Bid id={this.props.id} />\n                ) : (\n                  <Offer id={this.props.id} />\n                )}\n              </Segment>\n            </div>\n            {width ? (\n              <div style={{ width: \"40%\", marginLeft: \"10px\" }}>\n                <Supporter />\n              </div>\n            ) : null}\n          </div>\n        )}\n        {this.state.activeItem == \"bids\" ? (\n          <BidFilter id={this.props.id} />\n        ) : (\n          <OfferFilter id={this.props.id} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default SubMenu;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAiBA;AACA;AACA;AAnBA;AA8BA;AAAA;AAAA;AACA;AACA;AAhCA;AAkCA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AAAA;AACA;AADA;AAGA;AACA;AAhDA;AAiDA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAGA;AACA;AAtDA;AACA;AACA;AACA;AAHA;AAKA;AAGA;AAGA;AAbA;AAcA;AACA;;;AAKA;AACA;AACA;AACA;;;AAEA;AACA;AACA;;;AA6BA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAFA;AADA;AAMA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAeA;AAAA;AAAA;AAEA;AAAA;AAEA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAEA;AAAA;AAIA;;;;AA7GA;AACA;AA+GA;;;;A","sourceRoot":""}