(window.webpackJsonp=window.webpackJsonp||[]).push([["104c"],{Juxd:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/store/createproduct",function(){var e=a("xn1F");return{page:e.default||e}}])},xn1F:function(e,t,a){"use strict";a.r(t);var n=a("0iUn"),r=a("sLSF"),i=a("MI3g"),l=a("a7VT"),c=a("AT/M"),o=a("Tit0"),s=a("vYYK"),u=a("q1tI"),d=a.n(u),p=a("CafY"),h=a("8cHP"),f=a("Mt1y"),m=a("aQu0"),g=a("vFsZ"),b=a("umxb"),v=a("pLir"),y=a("yZlV"),O=a("5XkN"),E=a("QetY"),C=a("D1pA"),j=a("Ktyj"),x=function(e){function t(e){var a;return Object(n.default)(this,t),a=Object(i.default)(this,Object(l.default)(t).call(this,e)),Object(s.a)(Object(c.default)(a),"handleOnChange",function(e){a.setState(Object(s.a)({},e.target.name,e.target.value))}),Object(s.a)(Object(c.default)(a),"selectInput",function(e,t){var n=t.value;a.setState({tag:n})}),Object(s.a)(Object(c.default)(a),"onTagUpdate",function(e){var t=[];e.forEach(function(e){var a=e.data(),n=a.key,r=a.text,i=a.value;t.push({key:n,text:r,value:i})}),a.setState({tags:t})}),Object(s.a)(Object(c.default)(a),"handleSelectFile",function(e){var t=e.target.files[0].name.split(".")[1];a.setState({file:e.target.files[0],url:URL.createObjectURL(e.target.files[0]),extension:t})}),Object(s.a)(Object(c.default)(a),"handleOnSubmit",function(e){e.preventDefault(),a.setState({loading:!0});var t="".concat(a.props.id,"/").concat(a.state.productname,".").concat(a.state.extension);j.a.storage().ref().child(t).put(a.state.file).then(function(){j.a.firestore().collection("stores").doc(a.props.id).get().then(function(e){var n=e.data().products;if(null==n)j.a.firestore().collection("stores").doc(a.props.id).set({products:[{productid:0,productname:a.state.productname,price:a.state.price,tag:a.state.tag,quantity:a.state.quantity,mrp:a.state.mrp,productdescription:a.state.productdescription,specification:a.state.specification,url:t}],available:!0},{merge:!0});else{var r=n.length;n.push({productid:r,productname:a.state.productname,price:a.state.price,tag:a.state.tag,quantity:a.state.quantity,mrp:a.state.mrp,productdescription:a.state.productdescription,specification:a.state.specification,url:t}),j.a.firestore().collection("stores").doc(a.props.id).set({products:n},{merge:!0})}h.Router.pushRoute("/store")})})}),a.state={tags:[],tag:"",productname:"",quantity:"",extension:"",price:"",store:"",loading:!1,specification:"",productdescription:"",mrp:"",file:null,url:null,user:""},a.ref=j.a.firestore().collection("tags"),a.tags=null,a}return Object(o.default)(t,e),Object(r.default)(t,[{key:"componentDidMount",value:function(){this.tags=this.ref.onSnapshot(this.onTagUpdate)}},{key:"render",value:function(){return d.a.createElement(p.a,null,d.a.createElement(f.a,{horizontal:!0,style:{margin:"10px"}},d.a.createElement(m.a,{as:"h3"},"Create Product")),d.a.createElement("div",{style:{margin:"10px",borderStyle:"solid",borderColor:"#DCDCDC",borderWidth:"1px",padding:"10px"}},d.a.createElement(g.a,{style:{margin:"10px"},onSubmit:this.handleOnSubmit},d.a.createElement(g.a.Field,{required:!0,control:b.a,onChange:this.handleOnChange,label:"Product Name",value:this.state.productname,placeholder:"Product Name",name:"productname"}),d.a.createElement(g.a.Field,{required:!0,value:this.state.mrp,control:b.a,onChange:this.handleOnChange,label:"MRP",placeholder:"Enter Maximum Retail Price",name:"mrp"}),d.a.createElement(g.a.Field,{required:!0,value:this.state.price,control:b.a,onChange:this.handleOnChange,label:"Price",placeholder:"Enter your current selling price",name:"price"}),d.a.createElement(g.a.Field,{label:"Tag",required:!0}),d.a.createElement(g.a.Field,null,d.a.createElement(v.a,{fluid:!0,search:!0,selection:!0,clearable:!0,name:"tag",placeholder:"Select Your Tag",options:this.state.tags,onChange:this.selectInput,value:this.state.tag})),d.a.createElement(g.a.Field,{required:!0,value:this.state.quantity,control:b.a,onChange:this.handleOnChange,label:"Quantity",placeholder:"Quantity",name:"quantity"}),d.a.createElement(g.a.Field,{required:!0,value:this.state.productdescription,control:y.a,onChange:this.handleOnChange,label:"Product Description",placeholder:"Enter the product description like its features, brand etc.",style:{height:"200px"},name:"productdescription"}),d.a.createElement(g.a.Field,{required:!0,value:this.state.specification,control:y.a,onChange:this.handleOnChange,label:"Specification",placeholder:"Enter product specification",style:{height:"200px"},name:"specification"}),d.a.createElement("input",{type:"file",id:"file",onChange:this.handleSelectFile}),d.a.createElement(O.a,{src:this.state.url}),d.a.createElement(E.a,{color:"blue",loading:this.state.loading},"Create Product ",d.a.createElement(C.a,{name:"add circle"})))))}}],[{key:"getInitialProps",value:function(e){return{id:e.query.id}}}]),t}(u.Component);t.default=x}},[["Juxd","5d41","9da1"]]]);